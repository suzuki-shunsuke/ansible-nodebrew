# test-docker.yml
# test playbook
- name: start docker
  hosts: localhost
  connection: local
  vars:
    base_image: suzukishunsuke/python2:ubuntu1604-0.1.1
    docker_hostname: test-ansible-nodebrew
  tasks:
  - name: start docker
    docker_container:
      image: "{{ base_image }}"
      name: "{{ docker_hostname }}"
      detach: yes
      tty: yes
      command: bash
  - name: Add host
    add_host:
      name: "{{ docker_hostname }}"
- name: create user
  hosts: test-ansible-nodebrew
  connection: docker
  vars:
  tasks:
  - name: create nodebrew user
    user: name=nodebrew shell=/bin/bash
- name: test with docker
  hosts: test-ansible-nodebrew
  connection: docker
  vars:
  roles:
  - role: ansible-nodebrew
    nodebrew_users:
    - root
    - nodebrew
